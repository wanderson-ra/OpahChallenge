{"version":3,"sources":["filmGateway.unit.test.ts"],"names":["describe","beforeEach","jest","clearAllMocks","it","episodeId","filmResponseJson","filmResponseJsonTemplateFull","build","properties","startWars","baseUrl","get","reply","film","expect","characters","toEqual","created","director","edited","episode_id","openingCrawl","opening_crawl","planets","producer","releaseDate","release_date","species","starships","title","url","vehicles","toBeInstanceOf","FilmNotFoundGatewayException","DefaultRestGatewayException"],"mappings":";;;;;;AAAA;;AAEA;;AACA;;AACA;;AAIA;;AAEA;;AAEAA,QAAQ,CAAC,sCAAD,EAAyC,YAAM;AACnDC,EAAAA,UAAU,CAAC,YAAM;AACbC,IAAAA,IAAI,CAACC,aAAL;AACA;AACH,GAHS,CAAV;AAKAC,EAAAA,EAAE,CAAC,mBAAD,EAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AACdC,YAAAA,SADc,GACF,CADE;AAEdC,YAAAA,gBAFc,GAEKC,+CAA6BC,KAA7B,EAFL;AAIpB,+BAAKC,uBAAWC,SAAX,CAAqBC,OAA1B,EAAmCC,GAAnC,aAAiDP,SAAjD,EAA8DQ,KAA9D,CAAoE,GAApE,EAAyEP,gBAAzE;AAJoB;AAAA,8CAMK,kCAAgBD,SAAhB,CANL;;AAAA;AAMdS,YAAAA,IANc;AAQpBC,YAAAA,MAAM,CAACD,IAAI,CAACE,UAAN,CAAN,CAAwBC,OAAxB,CAAgCX,gBAAgB,CAACU,UAAjD;AACAD,YAAAA,MAAM,CAACD,IAAI,CAACI,OAAN,CAAN,CAAqBD,OAArB,CAA6BX,gBAAgB,CAACY,OAA9C;AACAH,YAAAA,MAAM,CAACD,IAAI,CAACK,QAAN,CAAN,CAAsBF,OAAtB,CAA8BX,gBAAgB,CAACa,QAA/C;AACAJ,YAAAA,MAAM,CAACD,IAAI,CAACM,MAAN,CAAN,CAAoBH,OAApB,CAA4BX,gBAAgB,CAACc,MAA7C;AACAL,YAAAA,MAAM,CAACD,IAAI,CAACT,SAAN,CAAN,CAAuBY,OAAvB,CAA+BX,gBAAgB,CAACe,UAAhD;AACAN,YAAAA,MAAM,CAACD,IAAI,CAACQ,YAAN,CAAN,CAA0BL,OAA1B,CAAkCX,gBAAgB,CAACiB,aAAnD;AACAR,YAAAA,MAAM,CAACD,IAAI,CAACU,OAAN,CAAN,CAAqBP,OAArB,CAA6BX,gBAAgB,CAACkB,OAA9C;AACAT,YAAAA,MAAM,CAACD,IAAI,CAACW,QAAN,CAAN,CAAsBR,OAAtB,CAA8BX,gBAAgB,CAACmB,QAA/C;AACAV,YAAAA,MAAM,CAACD,IAAI,CAACY,WAAN,CAAN,CAAyBT,OAAzB,CAAiCX,gBAAgB,CAACqB,YAAlD;AACAZ,YAAAA,MAAM,CAACD,IAAI,CAACc,OAAN,CAAN,CAAqBX,OAArB,CAA6BX,gBAAgB,CAACsB,OAA9C;AACAb,YAAAA,MAAM,CAACD,IAAI,CAACe,SAAN,CAAN,CAAuBZ,OAAvB,CAA+BX,gBAAgB,CAACuB,SAAhD;AACAd,YAAAA,MAAM,CAACD,IAAI,CAACgB,KAAN,CAAN,CAAmBb,OAAnB,CAA2BX,gBAAgB,CAACwB,KAA5C;AACAf,YAAAA,MAAM,CAACD,IAAI,CAACiB,GAAN,CAAN,CAAiBd,OAAjB,CAAyBX,gBAAgB,CAACyB,GAA1C;AACAhB,YAAAA,MAAM,CAACD,IAAI,CAACkB,QAAN,CAAN,CAAsBf,OAAtB,CAA8BX,gBAAgB,CAAC0B,QAA/C;;AArBoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB,CAAF;AAwBA5B,EAAAA,EAAE,CAAC,2BAAD,EAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AACtBC,YAAAA,SADsB,GACV,CADU;AAG5B,+BAAKI,uBAAWC,SAAX,CAAqBC,OAA1B,EAAmCC,GAAnC,aAAiDP,SAAjD,EAA8DQ,KAA9D,CAAoE,GAApE;AAH4B;AAAA;AAAA,8CAKlB,kCAAgBR,SAAhB,CALkB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAOxBU,YAAAA,MAAM,cAAN,CAAckB,cAAd,CAA6BC,0DAA7B;;AAPwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA9B,CAAF;AAWA9B,EAAAA,EAAE,CAAC,yBAAD,EAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBC,YAAAA,SADoB,GACR,CADQ;AAG1B,+BAAKI,uBAAWC,SAAX,CAAqBC,OAA1B,EAAmCC,GAAnC,aAAiDP,SAAjD,EAA8DQ,KAA9D,CAAoE,GAApE;AAH0B;AAAA;AAAA,8CAKhB,kCAAgBR,SAAhB,CALgB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAOtBU,YAAAA,MAAM,cAAN,CAAckB,cAAd,CAA6BE,oDAA7B;;AAPsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA5B,CAAF;AAUH,CAnDO,CAAR","sourcesContent":["import nock, { cleanAll } from \"nock\";\n\nimport { DefaultRestGatewayException } from \"../../../../../src/gateways/exceptions/defaultGatewayException\";\nimport { FilmNotFoundGatewayException } from \"../../../../../src/gateways/exceptions/filmNotFoundGatewayException\";\nimport { findByEpisodeId } from \"../../../../../src/gateways/http/film/filmGateway\";\n\nimport { Film } from \"../../../../../src/domains/films\";\n\nimport { properties } from \"../../../../../src/configurations/properties\";\n\nimport { filmResponseJsonTemplateFull } from \"../../../../dataBuilders/cases/http/film/filmResponseJson.template\";\n\ndescribe(\"Tests of filmGateway/findByEpisodeId\", () => {\n    beforeEach(() => {\n        jest.clearAllMocks();\n        cleanAll();\n    });\n\n    it(\"Test with success\", async () => {\n        const episodeId = 1;\n        const filmResponseJson = filmResponseJsonTemplateFull.build();\n\n        nock(properties.startWars.baseUrl).get(`/films/${episodeId}`).reply(200, filmResponseJson);\n\n        const film: Film = await findByEpisodeId(episodeId);\n\n        expect(film.characters).toEqual(filmResponseJson.characters);\n        expect(film.created).toEqual(filmResponseJson.created);\n        expect(film.director).toEqual(filmResponseJson.director);\n        expect(film.edited).toEqual(filmResponseJson.edited);\n        expect(film.episodeId).toEqual(filmResponseJson.episode_id);\n        expect(film.openingCrawl).toEqual(filmResponseJson.opening_crawl);\n        expect(film.planets).toEqual(filmResponseJson.planets);\n        expect(film.producer).toEqual(filmResponseJson.producer);\n        expect(film.releaseDate).toEqual(filmResponseJson.release_date);\n        expect(film.species).toEqual(filmResponseJson.species);\n        expect(film.starships).toEqual(filmResponseJson.starships);\n        expect(film.title).toEqual(filmResponseJson.title);\n        expect(film.url).toEqual(filmResponseJson.url);\n        expect(film.vehicles).toEqual(filmResponseJson.vehicles);\n    });\n\n    it(\"Test with error not found\", async () => {\n        const episodeId = 1;\n\n        nock(properties.startWars.baseUrl).get(`/films/${episodeId}`).reply(404);\n        try {\n            await findByEpisodeId(episodeId);\n        } catch (error) {\n            expect(error).toBeInstanceOf(FilmNotFoundGatewayException);\n        }\n    });\n\n    it(\"Test with error default\", async () => {\n        const episodeId = 1;\n\n        nock(properties.startWars.baseUrl).get(`/films/${episodeId}`).reply(500);\n        try {\n            await findByEpisodeId(episodeId);\n        } catch (error) {\n            expect(error).toBeInstanceOf(DefaultRestGatewayException);\n        }\n    });\n});\n"]}