{"version":3,"sources":["findAllFilmsAndAddImageUrlUseCase.unit.test.ts"],"names":["describe","beforeAll","it","film","filmTemplateFullWithFixedEpisodeId","build","expectedFilmResponse","imageUrl","imageUrlsByFilm","find","episodeId","url","expectedFilmsAfterProcess","mockedFilmGateway","jest","spyOn","FilmGateway","calledWith","mockResolvedValue","FindAllFilmsAndAddImageUrlUseCase","findAll","filmsResponse","expect","toEqual","toBeCalled"],"mappings":";;;;;;;;AAAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEAA,QAAQ,CAAC,4CAAD,EAA+C,YAAM;AACzDC,EAAAA,SAAS,CAAC,YAAM;AACZ;AACH,GAFQ,CAAT;AAIAC,EAAAA,EAAE,CAAC,qCAAD,EAAwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAChCC,YAAAA,IADgC,GACzBC,iDAAmCC,KAAnC,EADyB;AAGhCC,YAAAA,oBAHgC,8BAI/BH,IAJ+B;AAKlCI,cAAAA,QAAQ,EAAEC,uBAAgBC,IAAhB,CAAqB,UAACF,QAAD;AAAA,uBAAcA,QAAQ,CAACG,SAAT,KAAuBP,IAAI,CAACO,SAA1C;AAAA,eAArB,EAA0EC;AALlD;AAQhCC,YAAAA,yBARgC,GAQJ,CAACN,oBAAD,CARI;AAUhCO,YAAAA,iBAVgC,GAUZC,IAAI,CAACC,KAAL,CAAWC,WAAX,EAAwB,SAAxB,CAVY;AAWtC,gCAAKH,iBAAL,EAAwBI,UAAxB,GAAqCC,iBAArC,CAAuD,CAACf,IAAD,CAAvD;AAXsC;AAAA,8CAaVgB,iCAAiC,CAACC,OAAlC,EAbU;;AAAA;AAahCC,YAAAA,aAbgC;AAetCC,YAAAA,MAAM,CAACD,aAAD,CAAN,CAAsBE,OAAtB,CAA8BX,yBAA9B;AACAU,YAAAA,MAAM,CAACT,iBAAD,CAAN,CAA0BW,UAA1B;;AAhBsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAxC,CAAF;AAkBH,CAvBO,CAAR","sourcesContent":["import { when, resetAllWhenMocks } from \"jest-when\";\n\nimport * as FilmGateway from \"../../../src/gateways/http/film/filmGateway\";\n\nimport * as FindAllFilmsAndAddImageUrlUseCase from \"../../../src/useCases/findAllFilmsAndAddImageUrlUseCase\";\n\nimport { imageUrlsByFilm } from \"../../../src/globals/constants/films\";\n\nimport { filmTemplateFullWithFixedEpisodeId } from \"../../dataBuilders/domains/filmTEmplate\";\n\ndescribe(\"Tests of FindAllFilmsAndAddImageUrlUseCase\", () => {\n    beforeAll(() => {\n        resetAllWhenMocks();\n    });\n\n    it(\"Test with success and add image url\", async () => {\n        const film = filmTemplateFullWithFixedEpisodeId.build();\n\n        const expectedFilmResponse = {\n            ...film,\n            imageUrl: imageUrlsByFilm.find((imageUrl) => imageUrl.episodeId === film.episodeId).url,\n        };\n\n        const expectedFilmsAfterProcess = [expectedFilmResponse];\n\n        const mockedFilmGateway = jest.spyOn(FilmGateway, \"findAll\");\n        when(mockedFilmGateway).calledWith().mockResolvedValue([film]);\n\n        const filmsResponse = await FindAllFilmsAndAddImageUrlUseCase.findAll();\n\n        expect(filmsResponse).toEqual(expectedFilmsAfterProcess);\n        expect(mockedFilmGateway).toBeCalled();\n    });\n});\n"]}